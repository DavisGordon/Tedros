function scrollTo(a){$(document.body).animate({scrollTop:$("#"+a).offset().top},2e3)}function ltpf(){$.ajax({url:"../api/painel/tiposAjuda/PF",type:"get",dataType:"json",headers:{"Content-Type":"application/json"},success:function(a){"200"==a.code?tpf=a.data:alert(a.message),ltpj()}})}function ltpj(){$.ajax({url:"../api/painel/tiposAjuda/PJ",type:"get",dataType:"json",headers:{"Content-Type":"application/json"},success:function(a){"200"==a.code?tpj=a.data:alert(a.message),carregarAcoes()}})}function logout(){$.ajax({url:"../api/painel/logout",type:"get",dataType:"json",headers:{"Content-Type":"application/json"},success:function(a){"200"==a.code?location.href="../voluntario.html":alert(a.message)}})}function carregarEstados(){$.ajax({url:"../api/painel/ufs",type:"get",dataType:"json",headers:{"Content-Type":"application/json"},success:function(a){$("#uf").append('<option value="">Selecione</option>'),a.data&&$.each(a.data,function(a,e){$("#uf").append('<option value="'+e.id+'">'+e.descricao+"</option>")}),carregarDadosPessoais()}})}function carregarDadosPessoais(){$.ajax({url:"../api/painel/user",type:"get",dataType:"json",headers:{"Content-Type":"application/json"},success:function(a){processarUser(a)}})}function participar(a,e){$(a).each(function(){this.data("href",this.attr("href")).attr("href","javascript:void(0)").attr("disabled","disabled")}),$.ajax({url:"../api/painel/acao/participar/"+e,type:"post",dataType:"json",headers:{"Content-Type":"application/json"},success:function(a){processarAcoes(a)}})}function sair(a,e,o){var t=document.getElementById("frm"+o);showLoader("lds-circle",t),$(a).each(function(){this.data("href",this.attr("href")).attr("href","javascript:void(0)").attr("disabled","disabled")}),$.ajax({url:"../api/painel/acao/sair/"+e,type:"delete",dataType:"json",headers:{"Content-Type":"application/json"},success:function(a){showLoader("",t),processarAcoes(a)}})}function carregarAcoes(){$.ajax({url:"../api/painel/acoes",type:"get",dataType:"json",headers:{"Content-Type":"application/json"},success:function(a){processarAcoes(a)}})}function displayContent(a){var e=document.getElementById(a);e.style.display="none"==e.style.display?"block":"none"}function processarAcoes(a){if("200"==a.code){if(a.data){var e="",o=[];$.each(a.data,function(a,t){if(o.push("frm"+a),e+="<header>",e+="<h1>"+t.titulo+"</h1>",e+="<p>"+t.data+", "+t.status+", Inscritos("+t.qtdVoluntariosInscritos+"), Max("+t.qtdMaxVoluntarios+"), Min("+t.qtdMinVoluntarios+")</p>",e+="</header>",e+="<p>"+t.descricao+"</p>",e+="<a href=\"javascript: displayContent('content"+a+'\')" class="button primary fit small">Opções</a>',"Agendada"==t.status&&(tpf||tpj)){var i=t.inscrito?"block":"none";e+='<div class="content contentLoad" id="content'+a+'" style="display:'+i+';">',e+='<div id="loader'+a+'" class="loader">',e+='<div id="cssloader'+a+'"><div></div></div>',e+="</div>",e+="<h2>Quero participar</h2>",e+='<form name="frm'+a+'" id="frm'+a+'"  method="post" action="../api/painel/acao/participar/"><p>',e+='<input type="hidden" name="id" id="id" value="'+t.id+'" /> ',e+='<input type="hidden" name="idx" id="idx" value="'+a+'" /> ',e+='<div class="fields">',tpf&&(e+='<div class="field half" style="text-align:left;"><h3>Como voluntário:</h3>',$.each(tpf,function(a,o){var i="";$.each(t.tiposAjuda,function(a,e){o.id==e.id&&(i="checked")}),e+='<input type="checkbox" '+i+' name="tiposAjuda" id="tiposAjudapf'+t.id+"_"+a+'" value="'+o.id+'" /> ',e+='<label for="tiposAjudapf'+t.id+"_"+a+'">'+o.descricao+"</label><br>"}),e+="</p></div>"),tpj&&(e+='		<div class="field half" style="text-align:left;"><h3>Prestando suporte:</h3><p>',$.each(tpj,function(a,o){var i="";$.each(t.tiposAjuda,function(a,e){o.id==e.id&&(i="checked")}),e+='<input type="checkbox" '+i+' name="tiposAjuda" id="tiposAjudapj'+t.id+"_"+a+'" value="'+o.id+'" />',e+='<label for="tiposAjudapj'+t.id+"_"+a+'">'+o.descricao+"</label><br>"}),e+="</p></div>"),e+="	</div>",e+='	<ul class="actions">',e+='		<li><input type="submit" name="submit" id="submit" value="Participar" /></li>',t.inscrito&&(e+='<li><a id="pa'+t.id+'" href="javascript: sair(\'pa'+t.id+"', "+t.id+", "+a+')" class="button fit small wide smooth-scroll-middle">Sair da ação</a></li>'),e+="</ul>",e+="</form>",e+="</div>"}e+="<hr />"}),$("#acoesContent").html(e),o.forEach(function(a){$("#"+a).ajaxForm({beforeSubmit:validateTpa,success:showResponseTpa})})}}else alert(a.message)}function processarUser(a){"200"==a.code?a.data&&($("#userName").html(a.data.nome),$("#name").val(a.data.nome),$("#profissao").val(a.data.profissao),$("#identidade").val(a.data.identidade),$("#cpf").val(a.data.cpf),$("#nacionalidade").val(a.data.nacionalidade),$("#email").val(a.data.email),$("#telefone").val(a.data.telefone),$("#dtNasc").val(a.data.dataNascimento),$('#estCiv option[value="'+a.data.estadoCivil+'"]').prop("selected",!0),$('#sexo option[value="'+a.data.sexo+'"]').prop("selected",!0),$("#tipoLogradouro").val(a.data.tipoLogr),$("#logradouro").val(a.data.logradouro),$("#complemento").val(a.data.complemento),$("#bairro").val(a.data.bairro),$("#cidade").val(a.data.cidade),$("#cep").val(a.data.cep),$('#uf option[value="'+a.data.ufid+'"]').prop("selected",!0)):alert(a.message)}function validateTpa(a,e,o){var t=e[0],i=!1;return $.each(t.tiposAjuda,function(a,e){e.checked&&(i=!0)}),i?void showLoader("lds-heart",t):(alert("Por favor selecionar uma forma de como deseja ajudar."),!1)}function showLoader(a,e){var o=document.getElementById("loader"+e.idx.value);""!=a?(document.getElementById("cssloader"+e.idx.value).className=a,o.style.display="block",e.style="background-color: #cccccc; opacity: .4;"):(o.style.display="none",document.getElementById("cssloader"+e.idx.value).className="",e.style="")}function validate(a,e,o){var t="",i=e[0];return i.name.value||(t+="Nome"),i.profissao.value||(""!=t&&(t+=", "),t+="Profissão"),i.identidade.value||(""!=t&&(t+=", "),t+="Identidade"),i.cpf.value||(""!=t&&(t+=", "),t+="CPF"),i.nacionalidade.value||(""!=t&&(t+=", "),t+="Nacionalidade"),i.email.value||(""!=t&&(t+=", "),t+="Email"),$("#estCiv option:selected").val()||(""!=t&&(t+=", "),t+="Estado Civil"),i.tipoLogradouro.value||(""!=t&&(t+=", "),t+="Tipo Logradouro"),i.logradouro.value||(""!=t&&(t+=", "),t+="Logradouro"),i.bairro.value||(""!=t&&(t+=", "),t+="Bairro"),i.complemento.value||(""!=t&&(t+=", "),t+="Complemento"),i.cidade.value||(""!=t&&(t+=", "),t+="Cidade"),$("#uf option:selected").val()||(""!=t&&(t+=", "),t+="Estado (UF)"),i.cep.value||(""!=t&&(t+=", "),t+="CEP"),""!=t?(alert("Por favor informar os campos: "+t),!1):i.email.value&&!validateEmail(i.email.value)?(alert("Por favor informar um email valido."),!1):void showLoader("lds-circle",i)}function showResponse(a,e,o,t){"200"==a.code?(processarUser(a),alert("Dados alterados!")):alert(a.message),showLoader("",t[0])}function showResponseTpa(a,e,o,t){var i=t[0];"200"==a.code?(processarAcoes(a),alert("Obrigado sua intenção em ajudar foi registrada e em breve entraremos em contato ou se desejar entre em contato conosco!"),showLoader("",i)):"404"==a.code?(alert(a.message),location.href="#volun"):(alert(a.message),showLoader("",i))}function validateEmail(a){const e=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(a)}$(document).ready(function(){$("#frm1000").ajaxForm({beforeSubmit:validate,success:showResponse}),carregarEstados(),ltpf()});var tpf,tpj;