function scrollTo(a){$(document.body).animate({scrollTop:$("#"+a).offset().top},2e3)}function ltpf(){$.ajax({url:"../api/painel/tiposAjuda/PF",type:"get",dataType:"json",headers:{"Content-Type":"application/json"},success:function(a){"200"==a.code?tpf=a.data:alert(a.message),ltpj()}})}function ltpj(){$.ajax({url:"../api/painel/tiposAjuda/PJ",type:"get",dataType:"json",headers:{"Content-Type":"application/json"},success:function(a){"200"==a.code?tpj=a.data:alert(a.message),carregarAcoes()}})}function logout(){$.ajax({url:"../api/painel/logout",type:"get",dataType:"json",headers:{"Content-Type":"application/json"},success:function(a){"200"==a.code?location.href="../voluntario.html":alert(a.message)}})}function carregarEstados(){$.ajax({url:"../api/painel/ufs",type:"get",dataType:"json",headers:{"Content-Type":"application/json"},success:function(a){$("#uf").append('<option value="">Selecione</option>'),a.data&&$.each(a.data,function(a,e){$("#uf").append('<option value="'+e.id+'">'+e.descricao+"</option>")}),carregarDadosPessoais()}})}function carregarDadosPessoais(){$.ajax({url:"../api/painel/user",type:"get",dataType:"json",headers:{"Content-Type":"application/json"},success:function(a){processarUser(a)}})}function participar(a,e){$(a).each(function(){this.data("href",this.attr("href")).attr("href","javascript:void(0)").attr("disabled","disabled")}),$.ajax({url:"../api/painel/acao/participar/"+e,type:"post",dataType:"json",headers:{"Content-Type":"application/json"},success:function(a){processarAcoes(a)}})}function sair(a,e){$(a).each(function(){this.data("href",this.attr("href")).attr("href","javascript:void(0)").attr("disabled","disabled")}),$.ajax({url:"../api/painel/acao/sair/"+e,type:"delete",dataType:"json",headers:{"Content-Type":"application/json"},success:function(a){processarAcoes(a)}})}function carregarAcoes(){$.ajax({url:"../api/painel/acoes",type:"get",dataType:"json",headers:{"Content-Type":"application/json"},success:function(a){processarAcoes(a)}})}function displayContent(a){var e=document.getElementById(a);e.style.display="none"==e.style.display?"block":"none"}function processarAcoes(a){if("200"==a.code){if(a.data){var e="",o=[];$.each(a.data,function(a,t){if(o.push("frm"+a),e+="<header>",e+="<h1>"+t.titulo+"</h1>",e+="<p>"+t.data+", "+t.status+", Inscritos("+t.qtdVoluntariosInscritos+"), Max("+t.qtdMaxVoluntarios+"), Min("+t.qtdMinVoluntarios+")</p>",e+="</header>",e+="<p>"+t.descricao+"</p>",e+="<a href=\"javascript: displayContent('content"+a+'\')" class="button primary fit small">Opções</a>',"Agendada"==t.status&&(tpf||tpj)){var s=t.inscrito?"block":"none";e+='<div class="content" id="content'+a+'" style="display:'+s+'">',e+="<h2>Quero participar</h2>",e+='<form name="frm'+a+'" id="frm'+a+'" method="post" action="../api/painel/acao/participar/"><p>',e+='<input type="hidden" name="id" id="id" value="'+t.id+'" /> ',e+='<div class="fields">',tpf&&(e+='<div class="field half" style="text-align:left;"><h3>Como voluntário:</h3>',$.each(tpf,function(a,o){var s="";$.each(t.tiposAjuda,function(a,e){o.id==e.id&&(s="checked")}),e+='<input type="checkbox" '+s+' name="tiposAjuda" id="tiposAjudapf'+t.id+"_"+a+'" value="'+o.id+'" /> ',e+='<label for="tiposAjudapf'+t.id+"_"+a+'">'+o.descricao+"</label><br>"}),e+="</p></div>"),tpj&&(e+='		<div class="field half" style="text-align:left;"><h3>Prestando suporte:</h3><p>',$.each(tpj,function(a,o){var s="";$.each(t.tiposAjuda,function(a,e){o.id==e.id&&(s="checked")}),e+='<input type="checkbox" '+s+' name="tiposAjuda" id="tiposAjudapj'+t.id+"_"+a+'" value="'+o.id+'" />',e+='<label for="tiposAjudapj'+t.id+"_"+a+'">'+o.descricao+"</label><br>"}),e+="</p></div>"),e+="	</div>",e+='	<ul class="actions">',e+='		<li><input type="submit" name="submit" id="submit" value="Participar" /></li>',t.inscrito&&(e+='<li><a id="pa'+t.id+'" href="javascript: sair(\'pa'+t.id+"', "+t.id+')" class="button fit small wide smooth-scroll-middle">Sair da ação</a></li>'),e+="</ul>",e+="</form>",e+="</div>"}e+="<hr />"}),$("#acoesContent").html(e),o.forEach(function(a){$("#"+a).ajaxForm({beforeSubmit:validateTpa,success:showResponseTpa})})}}else alert(a.message)}function processarUser(a){"200"==a.code?a.data&&($("#userName").html(a.data.nome),$("#name").val(a.data.nome),$("#profissao").val(a.data.profissao),$("#identidade").val(a.data.identidade),$("#cpf").val(a.data.cpf),$("#nacionalidade").val(a.data.nacionalidade),$("#email").val(a.data.email),$("#telefone").val(a.data.telefone),a.data.estadoCivil&&"Casado"==a.data.estadoCivil&&$("#casado").prop("checked",!0),a.data.estadoCivil&&"Solteiro"==a.data.estadoCivil&&$("#solteiro").prop("checked",!0),a.data.sexo&&"M"==a.data.sexo&&$("#m").prop("checked",!0),a.data.sexo&&"F"==a.data.sexo&&$("#f").prop("checked",!0),$("#tipoLogradouro").val(a.data.tipoLogr),$("#logradouro").val(a.data.logradouro),$("#complemento").val(a.data.complemento),$("#bairro").val(a.data.bairro),$("#cidade").val(a.data.cidade),$("#cep").val(a.data.cep),$('#uf option[value="'+a.data.ufid+'"]').prop("selected",!0)):alert(a.message)}function validateTpa(a,e,o){var t=e[0],s=!1;return $.each(t.tiposAjuda,function(a,e){e.checked&&(s=!0)}),s?void 0:(alert("Por favor selecionar uma forma de como deseja ajudar."),!1)}function validate(a,e,o){var t="",s=e[0];return s.name.value||(t+="Nome"),s.profissao.value||(""!=t&&(t+=", "),t+="Profissão"),s.identidade.value||(""!=t&&(t+=", "),t+="Identidade"),s.cpf.value||(""!=t&&(t+=", "),t+="CPF"),s.nacionalidade.value||(""!=t&&(t+=", "),t+="Nacionalidade"),s.email.value||(""!=t&&(t+=", "),t+="Email"),document.getElementById("casado").checked||document.getElementById("solteiro").checked||(""!=t&&(t+=", "),t+="Casado ou Solteiro"),s.tipoLogradouro.value||(""!=t&&(t+=", "),t+="Tipo Logradouro"),s.logradouro.value||(""!=t&&(t+=", "),t+="Logradouro"),s.bairro.value||(""!=t&&(t+=", "),t+="Bairro"),s.complemento.value||(""!=t&&(t+=", "),t+="Complemento"),s.cidade.value||(""!=t&&(t+=", "),t+="Cidade"),$("#uf option:selected").val()||(""!=t&&(t+=", "),t+="Estado (UF)"),s.cep.value||(""!=t&&(t+=", "),t+="CEP"),""!=t?(alert("Por favor informar os campos: "+t),!1):s.email.value&&!validateEmail(s.email.value)?(alert("Por favor informar um email valido."),!1):void 0}function showResponse(a,e,o,t){"200"==a.code?(processarUser(a),alert("Dados alterados!")):alert(a.message)}function showResponseTpa(a,e,o,t){"200"==a.code?(processarAcoes(a),alert("Obrigado sua intenção em ajudar foi registrada e em breve entraremos em contato ou se desejar entre em contato conosco!")):"404"==a.code?(alert(a.message),location.href="#volun"):alert(a.message)}function validateEmail(a){const e=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(a)}$(document).ready(function(){$("#frm").ajaxForm({beforeSubmit:validate,success:showResponse}),carregarEstados(),ltpf()});var tpf,tpj;