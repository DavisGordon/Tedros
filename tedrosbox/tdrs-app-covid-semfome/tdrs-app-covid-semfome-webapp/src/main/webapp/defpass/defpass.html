<!DOCTYPE HTML>
<html>
	<head>
		<title>Covid Sem Fome - Definir nova senha</title>
		<meta charset="utf-8" />
		<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
		<meta http-equiv="Pragma" content="no-cache" />
		<meta http-equiv="Expires" content="0" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="../assets/css/main.css" />
		<noscript><link rel="stylesheet" href="../assets/css/noscript.css" /></noscript>
		
	
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper" class="divided">
				<section class="banner style2 orient-center content-align-center image-position-right fullscreen onload-image-fade-in onload-content-fade-right">
						<div class="content">
							<h2>Definir nova senha</h2>
							
							<form name="frm" id="frm" method="post" action="../api/auth/defpass" >
								<div class="fields">
									<div class="field half">
										<label for="pass">Senha</label>
										<input type="password" name="pass" id="pass" value="" />
									</div>
									<div class="field half">
										<label for="passConf">Confirmar Senha</label>
										<input type="password" name="passConf" id="passConf" value="" />
									</div>
								</div>
								<ul class="actions stacked">
									<li><input type="submit" name="submit" id="submit" value="Definir nova senha" /></li>
								</ul>
								<input type="hidden" name="key" id="key">
							</form>
						</div>
						<div class="image">
							<img src="../images/gallery/fulls/11.jpg" alt="" />
						</div>
					</section>
			
			</div>
			
	<!-- Scripts -->
			<script src="../assets/js/jquery.min.js"></script>
			<script src="../assets/js/jquery.scrollex.min.js"></script>
			<script src="../assets/js/jquery.scrolly.min.js"></script>
			<script src="../assets/js/browser.min.js"></script>
			<script src="../assets/js/breakpoints.min.js"></script>
			<script src="../assets/js/util.js"></script>
			<script src="../assets/js/main.js"></script>
    		<script src="../assets/js/jquery.form.js"></script> 
    		
    		
    		<script type="text/javascript">
    		$(document).ready(function() { 
    		    // bind form using ajaxForm 
    		    $('#frm').ajaxForm( { beforeSubmit: validate, success: showResponse  } ); 
    		    var key = getUrlParameter('k');
    		    document.getElementById("key").value = key;
    		    //alert(key);
    		    //alert(document.getElementById("key").value);
    		});
    		
    		function validate(formData, jqForm, options) { 
    			 
    		    var form = jqForm[0]; 
    		    if (!form.pass.value || !form.passConf.value) { 
    		        alert('Por favor informar as senhas.'); 
    		        return false; 
    		    } 
    		    if (form.pass.value && form.passConf.value && form.pass.value != form.passConf.value) { 
    		        alert('As senhas n√£o conferem.'); 
    		        return false; 
    		    } 
    		    
    		}
    		
    		function showResponse(result, statusText, xhr, $form)  { 
    			if(result.code == "200"){
	        		location.href = '../voluntario.html';
	        	}else{
	        		alert(result.message);
	        	}
    		} 
    		
    		var getUrlParameter = function getUrlParameter(sParam) {
    		    var sPageURL = window.location.search.substring(1),
    		        sURLVariables = sPageURL.split('&'),
    		        sParameterName,
    		        i;

    		    for (i = 0; i < sURLVariables.length; i++) {
    		        sParameterName = sURLVariables[i].split('=');

    		        if (sParameterName[0] === sParam) {
    		            return sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);
    		        }
    		    }
    		};
    		</script>

</body>
</html>